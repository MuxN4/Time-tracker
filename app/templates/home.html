{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}

<h1>Tasks</h1>

<ul>

  {% for task in tasks %}
  
  <li>
    {{ task.name }} - {{ task.description }} <br>
    <strong>Total Time: {{ task.total_time }}</strong> <br>
    {% for entry in task.time_entries %}
    - {{ entry.start_time }} to {% if entry.end_time %}{{ entry.end_time }}{% else %}In Progress{% endif %} <br>
    {% if not entry.end_time %}
    <form action="{{ url_for('stop_time', entry_id=entry.id) }}" method="post" style="display:inline;">
      <button type="submit">Stop Time</button>
    </form>
    {% endif %}
    {% endfor %}
    <form action="{{ url_for('start_time', task_id=task.id) }}" method="post" style="display:inline;">
      <button type="submit">Start Time</button>
    </form>
  </li>

  {% endfor %}

</ul>

<a href="{{ url_for('add_task') }}">Add a new task</a>

{% endblock %}